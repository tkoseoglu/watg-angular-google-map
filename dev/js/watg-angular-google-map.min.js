/*! watg-angular-google-map 2016-07-18 */
!function(){"use strict";angular.module("watgGoogleMapModule",["ngRoute","ngSanitize"])}(),function(){function appConfig($httpProvider,$routeProvider){$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",$routeProvider.when("/test",{templateUrl:"src/app/tests/testView.html",controller:"testController"}).otherwise({redirectTo:"/test"})}function appRun(){}var app=angular.module("watgGoogleMapModule");app.config(appConfig),app.run(appRun)}(),function(){"use strict";function watgGoogleMapDirective(){function link(scope,element){function handleLocationError(browserHasGeolocation,infoWindow,pos){infoWindow.setPosition(pos),infoWindow.setContent(browserHasGeolocation?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}function removeAllMarkers(){for(var i=0;i<scope.config.markers.length;i++)scope.config.markers[i].setMap(null);for(var ii=0;ii<clusterMarkers.length;ii++)clusterMarkers[ii].setMap(null);clusterMarkers=[],console.log("all markers removed")}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:scope.config.lat,lng:scope.config.lon},zoom:scope.config.zoom,disableDefaultUI:scope.config.disableDefaultUI,mapTypeControl:scope.config.mapTypeControl,fullscreenControl:scope.config.fullscreenControl,disableAutoPan:scope.config.disableAutoPan,shadowStyle:scope.config.shadowStyle}),void 0!==scope.config.customMapTypes&&scope.config.customMapTypes.length>0&&(map.mapTypes.set(scope.selectedMapTypeId,scope.config.customMapTypes[0]),map.setMapTypeId(scope.selectedMapTypeId)),scope.config.showMyLocation&&(navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){infoWindow=new google.maps.InfoWindow({map:map});var pos={lat:position.coords.latitude,lng:position.coords.longitude};infoWindow.setPosition(pos),infoWindow.setContent("You are here!")},function(){handleLocationError(!0,infoWindow,map.getCenter())}):handleLocationError(!1,infoWindow,map.getCenter())),scope.config.showDayNightOverlay&&new DayNightOverlay({map:map,fillColor:scope.config.dayNightOverlayFillColor||"rgba(0,0,0,0.3)"}),scope.$watchCollection("config.markers",function(newValue,oldValue){removeAllMarkers(),console.log("config.markers collection changed..."),scope.config.markers.length>0&&scope.config.markers.forEach(function(m){var contentString="<div>";contentString+="<div style='float:left;margin-right:5px;'>",m.imgSrc&&(contentString+="<img src='"+m.imgSrc+"' style='height:100px'/></div>"),contentString+="<div style='float:right;margin-left:5px;'>",contentString+="<div><b>"+m.title+"</b></div>",contentString+="<div>"+m.subTitle+"</div>",contentString+="<div>"+m.linkContent+"</div>";var markerInfowindow=new google.maps.InfoWindow({content:contentString}),marker=new google.maps.Marker({position:{lat:m.lat,lng:m.lon},map:map,title:m.title,icon:m.icon});marker.addListener("click",function(){markerInfowindow.open(map,marker)})})}),scope.$watchCollection("config.clusterMarkers",function(newValue,oldValue){if(removeAllMarkers(),console.log("config.clusterMarkers collection changed..."),scope.config.clusterMarkers.length>0){scope.config.clusterMarkers.forEach(function(m){var contentString="<div>";contentString+="<div style='float:left;margin-right:5px;'>",m.imgSrc&&(contentString+="<img src='"+m.imgSrc+"' style='height:100px'/></div>"),contentString+="<div style='float:right;margin-left:5px;'>",contentString+="<div><b>"+m.title+"</b></div>",contentString+="<div>"+m.subTitle+"</div>",contentString+="<div>"+m.linkContent+"</div>",contentString+="</div>",contentString+="</div>";var markerInfowindow=new google.maps.InfoWindow({content:contentString}),latLng=new google.maps.LatLng(m.lat,m.lon);if(0!=clusterMarkers.length)for(var i=0;i<clusterMarkers.length;i++){var existingMarker=clusterMarkers[i],pos=existingMarker.getPosition();if(latLng.equals(pos)){var a=360/clusterMarkers.length,newLat=pos.lat()+-4e-4*Math.cos(+a*i/180*Math.PI),newLng=pos.lng()+-4e-4*Math.sin(+a*i/180*Math.PI);latLng=new google.maps.LatLng(newLat,newLng)}}var marker=new google.maps.Marker({position:latLng,title:m.title,icon:scope.config.customMarkerUrl,textColor:"white"});marker.addListener("click",function(){markerInfowindow.open(map,marker)}),clusterMarkers.push(marker)});var options={imagePath:"https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m",gridSize:scope.config.clusterGridSize,styles:scope.config.clusterStyles};new MarkerClusterer(map,clusterMarkers,options)}})}var map,clusterMarkers=[];initMap()}return{restrict:"E",template:"<div id='map' class='watgAngularGoogleMap'></div>",replace:"true",scope:{config:"=",selectedMapTypeId:"="},link:link}}angular.module("watgGoogleMapModule").directive("watgGoogleMap",watgGoogleMapDirective)}(),function(){"use strict";function testController($scope){var watg1teamhome=new google.maps.StyledMapType([{featureType:"landscape",stylers:[{color:"#808080"}]},{featureType:"water",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]}],{name:"WATG1 Team Home"});$scope.selectedMapTypeId="watg1_team_home",$scope.mapConfig={lat:34,lon:-117,zoom:3,customMapTypes:[watg1teamhome],customMarkerUrl:"src/assets/images/pin.png",showMyLocation:!1,disableDefaultUI:!1,mapTypeControl:!1,fullscreenControl:!0,disableAutoPan:!1,shadowStyle:1,showDayNightOverlay:!0,dayNightOverlayFillColor:"rgba(0,0,0,0.1)",clusterMarkers:[{title:"Santa Fe",subTitle:"Santa Fe...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:35.6869752,lon:-105.937799},{title:"Albuquerque",subTitle:"Albuquerque...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:35.0853336,lon:-106.6055534},{title:"Albuquerque 2",subTitle:"Albuquerque 2...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:35.0853336,lon:-106.6055534},{title:"Albuquerque 3",subTitle:"Albuquerque 3...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:35.0853336,lon:-106.6055534},{title:"Albuquerque 4",subTitle:"Albuquerque 4...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:35.0853336,lon:-106.6055534},{title:"New York",subTitle:"New York...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:40.7127837,lon:-74.0059413},{title:"Austin",subTitle:"Austin...",linkContent:"<a href='http://www.google.com'>My Link</a>",lat:30.267153,lon:-97.7430608}],clusterGridSize:100,clusterStyles:[{textColor:"white",fontFamily:"'Open Sans', Arial",textSize:18,url:"src/assets/images/custom/clusterMarker.png",height:52,width:53}],markers:[]}}angular.module("watgGoogleMapModule").controller("testController",["$scope",testController])}();